{% extends "base.html" %}
{% block title %}Your Profile | SocialApp{% endblock %}



{% block content %}

 

<div class="container">

  
  
  <!-- Left section: tokens -->
  <div class="left-section" id="left">
    {% block headers %}
<h1>Welcome to Your Dashboard</h1>
<div class="intro">
  This is your personalized space on SocialApp. Here you can view your authentication tokens, profile details, and account information securely.
</div>
<div id="popupModal" class="profilepicmodal" style="display:none;">
  <div class="modal-content">
    <span id="closeBtn">&times;</span>
    <!-- iframe will load your profile.html -->
    <iframe id="popupFrame" src="" width="100%" height="600px" style="border:none;"></iframe>
  </div>
</div>

{% endblock headers %}
    {% block temp %}

    
    <div class="box">
      <h3>ğŸ” Access Token</h3>
      <div class="intro">The access token is your digital key to protected routes.</div>
      <div class="token-text" id="accessToken">{{ access }}</div>
      <button onclick="copyToClipboard('accessToken', this)">ğŸ“‹ Copy Access Token</button>
    </div>

    <div class="box">
      <h3>ğŸ”„ Refresh Token</h3>
      <div class="intro">The refresh token helps maintain your session without forcing you to log in again.</div>
      <div class="token-text" id="refreshToken">{{ refresh }}</div>
      <button onclick="copyToClipboard('refreshToken', this)">ğŸ“‹ Copy Refresh Token</button>
    </div>
    {% endblock temp %}
  </div>
  
  
  

  
  <!-- Right section: user info -->
  <div class="right-section">
     
    <div class="box profile-pic-box">
      <h3>ğŸ–¼ï¸ Your Profile Picture</h3>
      <img src="http://127.0.0.1:8009/users/5/profile-pic"  alt="Profile Picture" class="xprofile-pic" />
      <button onclick="openEditModal2()">âœï¸ Edit Profile</button>
    </div>
     
     
    <div class="box">
       
      <h3>ğŸ‘¤ User Information</h3>
      <p><strong>First Name:</strong> {{ user_info.firstname }}</p>
      <p><strong>Last Name:</strong> {{ user_info.lastname }}</p>
      <p><strong>Email:</strong> {{ user_info.email }}</p>
      <p><strong>Role:</strong> {{ user_info.role }}</p>
      <p><strong>Job Title:</strong> {{ user_info.job }}</p>
      <p><strong>Location:</strong> {{ user_info.location }}</p>
      <p><strong>Member Since:</strong> {{ user_info.joined_date }}</p>
      <p><strong>Phone:</strong> {{ user_info.phone_no }}</p>
      
      <button onclick="openEditModal()">âœï¸ Edit Profile</button>
    </div>

    <div class="box">
      <h3>ğŸ“„ About You</h3>
      <p>{{ user_info.about }}</p>
    </div>
  </div>
   
   
</div>


  
<!-- Modals here -->
<!-- Profile edit modal -->
<div id="editModal" class="modalw">
  <div class="modal-content">
    <span class="close" onclick="closeEditModal()">&times;</span>
    <h2>Edit Your Profile</h2>
    
    <form id="editForm">
      <label>Role:</label>
      <input type="text" name="role" value="{{ user_info.role }}">
      
      <label>Job Title:</label>
      <input type="text" name="job" value="{{ user_info.job }}">

      <label>About You:</label>
      <textarea name="about">{{ user_info.about }}</textarea>
      
      <label>Location:</label>
      <input type="text" name="location" value="{{ user_info.location }}">
      
      <label>Phone:</label>
      <input type="text" name="phone_no" value="{{ user_info.phone_no }}">
      
      
      
      <button type="button" onclick="submitEditProfile()">ğŸ’¾ Save Changes</button>
    </form>
  </div>
</div>
<!-- Profile picture edit modal -->
<div id="editModal2" class="modalw">
  <div class="modal-content">
    <span class="close" onclick="closeEditModal2()">&times;</span>
    <h2>Edit Your Profile Picture</h2>
    
    <form id="editForm2">
      <label>Update your Profile pic:</label>
      <input type="file" id="videoInput" accept="image/*">
      <button type="button" onclick="submitEditPic()">ğŸ’¾ Save Changes</button>
    </form>
     
  </div>
</div>

{% endblock content %}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', path='css/profile.css') }}">


{% endblock %}
{% block script %}
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="{{ url_for('static', path='js/profile.js') }}"></script>


{% endblock script %}


